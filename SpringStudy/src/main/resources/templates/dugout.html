<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8"/>
    <title>더그아웃 - 야구를 가장 가까이에서</title>
    <link rel="stylesheet" href="dugout.css"/>
    <link rel="stylesheet" href="/chatbot/chatbotResult.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet"/>
    <link rel="icon" type="image/png" href="/dugout.png"/>

</head>


<body>

<div class="team-marquee">
    <div class="marquee-track">
        <a href="/team/kia">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/kia.png"
                 alt="KIA">
        </a>
        <a href="/team/lg">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/lg.png"
                 alt="LG">
        </a>
        <a href="/team/ssg">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/ssg.png"
                 alt="SSG">
        </a>
        <a href="/team/samsung">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/samsung.png"
                 alt="삼성">
        </a>
        <a href="/team/hanwha">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/hanwha.png"
                 alt="한화">
        </a>
        <a href="/team/lotte">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/lotte.png"
                 alt="롯데">
        </a>
        <a href="/team/doosan">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/doosan.png"
                 alt="두산">
        </a>
        <a href="/team/kiwoom">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/kiwoom.png"
                 alt="키움">
        </a>
        <a href="/team/nc">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/nc.png"
                 alt="NC">
        </a>
        <a href="/team/kt">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/kt.png"
                 alt="KT">
        </a>

        <!-- 반복 부분 -->
        <a href="/team/kia">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/kia.png"
                 alt="KIA">
        </a>
        <a href="/team/lg">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/lg.png"
                 alt="LG">
        </a>
        <a href="/team/ssg">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/ssg.png"
                 alt="SSG">
        </a>
        <a href="/team/samsung">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/samsung.png"
                 alt="삼성">
        </a>
        <a href="/team/hanwha">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/hanwha.png"
                 alt="한화">
        </a>
        <a href="/team/lotte">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/lotte.png"
                 alt="롯데">
        </a>
        <a href="/team/doosan">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/doosan.png"
                 alt="두산">
        </a>
        <a href="/team/kiwoom">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/kiwoom.png"
                 alt="키움">
        </a>
        <a href="/team/nc">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/nc.png"
                 alt="NC">
        </a>
        <a href="/team/kt">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/kt.png"
                 alt="KT">
        </a>
    </div>
</div>


<div class="hero">
    <h1>더그아웃</h1>
    <p>경기장의 더그아웃처럼, 가장 가까운 곳에서 야구를 지켜보세요.<br>
        티켓부터 뉴스, 기록, 룰까지 – 팬을 위한 야구의 모든 것.</p>
</div>

<div class="teams-section">
    <h2>2025 KBO 10개 구단 보기</h2>
    <div class="teams-grid">

        <div class="team-card">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/lg.png"
                 alt="LG">
            <p>LG 트윈스</p>
            <a href="/team/lg" class="btn">바로가기</a>
        </div>

        <div class="team-card">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/ssg.png"
                 alt="SSG">
            <p>SSG 랜더스</p>
            <a href="/team/ssg" class="btn">바로가기</a>
        </div>

        <div class="team-card">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/kia.png"
                 alt="KIA">
            <p>KIA 타이거즈</p>
            <a href="/team/kia" class="btn">바로가기</a>
        </div>

        <div class="team-card">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/kt.png"
                 alt="KT">
            <p>KT 위즈</p>
            <a href="/team/kt" class="btn">바로가기</a>
        </div>

        <div class="team-card">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/nc.png"
                 alt="NC">
            <p>NC 다이노스</p>
            <a href="/team/nc" class="btn">바로가기</a>
        </div>

        <div class="team-card">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/doosan.png"
                 alt="두산">
            <p>두산 베어스</p>
            <a href="/team/doosan" class="btn">바로가기</a>
        </div>

        <div class="team-card">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/lotte.png"
                 alt="롯데">
            <p>롯데 자이언츠</p>
            <a href="/team/lotte" class="btn">바로가기</a>
        </div>

        <div class="team-card">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/samsung.png"
                 alt="삼성">
            <p>삼성 라이온즈</p>
            <a href="/team/samsung" class="btn">바로가기</a>
        </div>

        <div class="team-card">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/hanwha.png"
                 alt="한화">
            <p>한화 이글스</p>
            <a href="/team/hanwha" class="btn">바로가기</a>
        </div>

        <div class="team-card">
            <img src="https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/kiwoom.png"
                 alt="키움">
            <p>키움 히어로즈</p>
            <a href="/team/kiwoom" class="btn">바로가기</a>
        </div>
    </div>
</div>


<div class="container">
    <div class="grid">
        <div class="card">
            <h2>ℹ️ 오늘의 정보</h2>
            <div class="btn-group">
                <a class="btn" href="/schedule">📅 경기 일정 제공</a>
                <a class="btn" href="/weather">🌦️ 지역 날씨 정보</a>
                <a class="btn" href="/news/view/KBO">📰 KBO 뉴스</a>
                <a class="btn" href="/tickets">🎟️ 구단 별 티켓 예매</a>

            </div>
        </div>

        <div class="card">
            <h2>⚾ KBO 2025 시즌</h2>
            <div class="btn-group">
                <a class="btn" href="/kbo/teamRank">📈 팀 순위</a>
                <a class="btn" href="/allrecords">🧾 타자/투수 기록실</a>
                <a class="btn" href="/award">🏅 수상 예측</a>
                <a class="btn" href="/award/goldenglove">🏆 골든 글러브 예측</a>

            </div>
        </div>

        <div class="card">
            <h2>📖 야구 룰</h2>
            <div class="btn-group">
                <a class="btn" href="/voca">💬 야구 용어 설명</a>
                <a class="btn" href="/rules"> ☝️ 야구 룰 설명 </a>
            </div>
        </div>
    </div>
</div>

<!-- 💬 플로팅 챗봇 버튼 -->
<div id="chatbot-toggle">💬</div>

<!-- 챗봇 패널 -->
<div id="chatbot-panel">
    <div class="chatbot-header">
        <span> 🤖 더그아웃이 말해주는 챗봇(Beta)</span>
        <button id="chatbot-close">✖</button>
    </div>
    <div class="chatbot-body" id="chatbot-messages">
        <div class="bot-msg">
            💡 예시 질문<br>
            • 2001년생 LG 투수<br>
            • 홈런 20개 이상 선수<br>
            • SSG 삼진 20개 이상 선수<br>
            • 삼성 OPS 0.9 넘는 선수<br>
            • 병살 10개 이상 롯데 타자
            (09.09 출생년도 조회, 타자 기록조회 가능)
        </div>
    </div>
    <div class="chatbot-footer">
        <input type="text" id="chatbot-input" placeholder="기록이 궁금하면 물어봐요!" />
        <button id="chatbot-send">➤</button>
    </div>
</div>




<footer>
    © 2025 더그아웃. “당신의 손 안에 있는 야구장, 여기는 더그아웃입니다.”
</footer>
</body>
</html>

<script>
    const toggleBtn = document.getElementById("chatbot-toggle");
    const panel = document.getElementById("chatbot-panel");
    const closeBtn = document.getElementById("chatbot-close");
    const sendBtn = document.getElementById("chatbot-send");
    const input = document.getElementById("chatbot-input");
    const messages = document.getElementById("chatbot-messages");

    // 열기 / 닫기
    toggleBtn.onclick = () => panel.style.display = "flex";
    closeBtn.onclick = () => panel.style.display = "none";

    // 챗봇 말풍선 추가
    function addBotMessage(text) {
        const div = document.createElement("div");
        div.className = "bot-msg";
        div.innerText = text;
        messages.appendChild(div);
        messages.scrollTop = messages.scrollHeight;
    }

    // 사용자 말풍선 추가
    function addUserMessage(text) {
        const div = document.createElement("div");
        div.className = "user-msg";
        div.innerText = text;
        messages.appendChild(div);
        messages.scrollTop = messages.scrollHeight;
    }

    // 카드 UI 생성
    function addCards(results, intent) {
        const wrap = document.createElement("div");
        wrap.className = "chat-cards";

        results.forEach(p => {
            const card = document.createElement("div");
            card.className = "chat-card";

            if (intent === "BORN_YEAR_PLAYER") {
                card.innerHTML = `
          <div class="player-name">${p.nameKr}</div>
          <div class="player-info">팀: ${p.team} | 포지션: ${p.position}</div>
          <div class="player-birth">생년월일: ${p.birth}</div>
        `;
            } else if (intent === "BATTING_CONDITION_PLAYER") {
                card.innerHTML = `
          <div class="player-name">${p.nameKr}</div>
          <div class="player-info">팀: ${p.team} | 포지션: ${p.position}</div>
          <div class="player-stat">${p.statType}: ${p.statValue}</div>
        `;
            } else {
                card.innerHTML = `<div class="player-name">${p.nameKr}</div>`;
            }

            wrap.appendChild(card);
        });

        messages.appendChild(wrap);
        messages.scrollTop = messages.scrollHeight;
    }

    // 메시지 전송
    function sendMessage() {
        const text = input.value.trim();
        if (!text) return;
        input.value = "";

        addUserMessage(text);

        fetch(`/chatbot/query?text=${encodeURIComponent(text)}`)
            .then(res => res.json())
            .then(data => {
                // 서머리 출력
                if (data.summary) {
                    addBotMessage(data.summary);
                }
                // 카드 출력
                if (data.results && data.results.length > 0) {
                    addCards(data.results, data.intent);
                }
            })
            .catch(() => {
                addBotMessage("⚠ 서버 오류가 발생했어요.");
            });
    }

    sendBtn.onclick = sendMessage;
    input.addEventListener("keypress", e => {
        if (e.key === "Enter") sendMessage();
    });
</script>

