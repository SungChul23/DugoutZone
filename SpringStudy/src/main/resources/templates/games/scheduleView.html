<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>KBO ê²½ê¸° ì¼ì •</title>
    <link rel="stylesheet" href="/games/schedule.css"/>
    <link rel="icon" type="image/png" href="/dugout.png"/>
    <!-- Swiper -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet"/>
</head>
<body>

<!-- ìƒë‹¨ ì†Œê°œ -->
<section class="hero">
    <h1>KBO ê²½ê¸° ì¼ì •</h1>
    <p>ë‚ ì§œë¥¼ ì„ íƒí•´ ì˜¤ëŠ˜ì˜ ê²½ê¸° ì¼ì •ì„ í™•ì¸í•˜ì„¸ìš”</p>
</section>

<div class="container">
    <!-- ë‚ ì§œ ì„ íƒ ìŠ¬ë¼ì´ë” -->
    <div class="swiper date-swiper">
        <div class="swiper-wrapper">
            <div class="swiper-slide"
                 th:each="d : ${availableDates}"
                 th:text="${d}"
                 th:classappend="${d == selectedDate} ? 'active' : ''"
                 th:attr="data-date=${d}">
            </div>
        </div>
    </div>

    <!-- ì„ íƒí•œ ë‚ ì§œ í‘œì‹œ -->
    <h2 style="text-align:center; margin-top: 20px;" th:text="'ğŸ“… ' + ${selectedDate} + ' ê²½ê¸° ì¼ì •'">
        ğŸ“… 08.03 ê²½ê¸° ì¼ì •
    </h2>

    <!-- ê²½ê¸° ëª©ë¡ -->
    <div class="schedule-wrapper">
        <!-- âœ… ë°˜ë³µë˜ëŠ” ê²½ê¸° -->
        <div class="game-row" th:each="game : ${games}">
            <div class="time" th:text="${game.time}">18:00</div>



            <div class="matchup">
        <span class="team">
            <img th:src="'https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/' + ${teamLogoMap[game.homeTeam]} + '.png'"
                 th:alt="${game.homeTeam}"
                 class="team-logo"/>
            <span th:text="${game.homeTeam}">ì‚¼ì„±</span>
        </span>

                <span class="vs">vs</span>

                <span class="team">
            <span th:text="${game.awayTeam}">ë‘ì‚°</span>
            <img th:src="'https://myspringstudybucket.s3.ap-northeast-2.amazonaws.com/test/teamLogo/teamLogo/' + ${teamLogoMap[game.awayTeam]} + '.png'"
                 th:alt="${game.awayTeam}"
                 class="team-logo"/>
        </span>
                <div class="stadium-info" th:text=" ${game.stadium}"
                     style="font-size: 0.9rem; color: #94a3b8; margin-top: 4px;">
                    ê³ ì²™ ìŠ¤ì¹´ì´ë”
                </div>
            </div>
        </div>
        <!-- ê²½ê¸° ì—†ì„ ë•Œ ë©”ì‹œì§€: ë°˜ë³µ ë°–ìœ¼ë¡œ ë¹¼ì•¼ í•¨ -->
        <p th:if="${games.size() == 0}" style="text-align:center; margin-top: 40px; color: #94a3b8;">
            ğŸ˜¢ ì„ íƒí•œ ë‚ ì§œì— ê²½ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.
        </p>
    </div>


    <div class="back-btn">
        <a href="/dugout" class="btn">ë”ê·¸ì•„ì›ƒ í™ˆìœ¼ë¡œ</a>
    </div>


    <footer>
        Â© 2025 DUGOUT | KBO ê²½ê¸° ì¼ì • ì œê³µ
    </footer>


    <!-- ë‚ ì§œ ë° ìŠ¤í¬ë¦½íŠ¸ (ì„ íƒ ë‚ ì§œ ìœ ì§€) -->
    <script th:inline="javascript">
        const selectedDate = /*[[${selectedDate}]]*/ "08.01";
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const slides = document.querySelectorAll('.swiper-slide');
            const index = Array.from(slides).findIndex(el => el.textContent.trim() === selectedDate);

            const swiper = new Swiper('.date-swiper', {
                slidesPerView: 5,
                spaceBetween: 12,
                centeredSlides: true,
                mousewheel: {
                    forceToAxis: true,
                    sensitivity: 1,
                    releaseOnEdges: true
                },
                breakpoints: {
                    768: {slidesPerView: 6},
                    1024: {slidesPerView: 7}
                },
                on: {
                    init: function () {
                        if (index !== -1) {
                            this.slideTo(index, 0); // ì¦‰ì‹œ ì´ë™
                        }
                    }
                }
            });

            swiper.init(); // ìˆ˜ë™ ì´ˆê¸°í™”ë¡œ ì •í™•í•œ ìœ„ì¹˜ ì§€ì •

            slides.forEach(el => {
                el.addEventListener('click', () => {
                    const date = el.getAttribute('data-date');
                    window.location.href = `/schedule?date=${encodeURIComponent(date)}`;
                });
            });
        });
    </script>
</div>
</body>
</html>
