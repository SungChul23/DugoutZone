<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>JWT ๋ก๊ทธ์ธ | Spring Study</title>
    <link rel="stylesheet" href="/login.css">
</head>
<body>

<nav class="navbar">
    <a href="/" class="logo">๐ Spring Shop</a>
    <div class="nav-links">
        <a href="/register">ํ์๊ฐ์</a>
    </div>
</nav>

<div class="form-container">
    <h2>JWT ๋ก๊ทธ์ธ</h2>
    <div class="form-group">
        <label for="jwt-username">์์ด๋</label>
        <input type="text" id="jwt-username" name="username" required>
    </div>
    <div class="form-group">
        <label for="jwt-password">๋น๋ฐ๋ฒํธ</label>
        <input type="password" id="jwt-password" name="password" required>
    </div>
    <button onclick="loginJWT()" class="submit-btn">JWT ๋ก๊ทธ์ธ</button>
    <a href="/register" class="btn secondary-btn">ํ์๊ฐ์ํ๊ธฐ</a>
</div>

<script>
    function loginJWT() {
        fetch('/login/jwt', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                username: document.querySelector('#jwt-username').value,
                password: document.querySelector('#jwt-password').value
            })
        })
            .then(r => {
                if (!r.ok) throw new Error('๋ก๊ทธ์ธ ์คํจ');
                return r.text();
            })
            .then(() => {
                // โ ์๋ฒ์์ ์ฟํค ์ด๋ฏธ ์์ฅ ์๋ฃ
                console.log('๋ก๊ทธ์ธ ์ฑ๊ณต! JWT ์ฟํค ์์ฅ๋จ');
                location.href = '/'; // ๋ฉ์ธ ํ์ด์ง๋ก ์ด๋
            })
            .catch(err => {
                console.error('๋ก๊ทธ์ธ ์์ฒญ ์คํจ', err);
                alert('์์ด๋๋ ๋น๋ฐ๋ฒํธ๊ฐ ํ๋ธ์ต๋๋ค.');
            });
    }
</script>


<button onclick="getMyPage()">๋ง์ดํ์ด์ง์ฃผ์ธ์</button>

<script>
    function getMyPage(){
        fetch('/my-page/jwt')
            .then(r => r.text())
            .then(r =>{ console.log(r) })
    }
</script>

<footer>
    <p>โ 2025 Spring Study Team</p>
</footer>

</body>
</html>
