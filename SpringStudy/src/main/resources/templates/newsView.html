<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title th:text="${team} + ' ë‰´ìŠ¤'">íŒ€ ë‰´ìŠ¤</title>
    <link rel="stylesheet" href="/newsView.css">
</head>
<body onload="loadNewsFromThymeleaf()">

<!-- âœ… ì—¬ê¸°ì— êµ¬ë‹¨ ë²„íŠ¼ë“¤ ì¶”ê°€ -->
<div class="team-buttons">
    <a class="team-btn kbo" href="/news/view/KBO">KBO ë¦¬ê·¸</a>
    <a class="team-btn ssg" href="/news/view/SSG">SSG</a>
    <a class="team-btn lg" href="/news/view/LG">LG</a>
    <a class="team-btn doosan" href="/news/view/DOOSAN">ë‘ì‚°</a>
    <a class="team-btn lotte" href="/news/view/LOTTE">ë¡¯ë°</a>
    <a class="team-btn nc" href="/news/view/NC">NC</a>
    <a class="team-btn kia" href="/news/view/KIA">KIA</a>
    <a class="team-btn kiwoom" href="/news/view/KIWOOM">í‚¤ì›€</a>
    <a class="team-btn hanwha" href="/news/view/HANWHA">í•œí™”</a>
    <a class="team-btn kt" href="/news/view/KT">KT</a>
    <a class="team-btn samsung" href="/news/view/SAMSUNG">ì‚¼ì„±</a>
</div>
<h1 th:text="${team} + ' ë‰´ìŠ¤ ê¸°ì‚¬'">íŒ€ ë‰´ìŠ¤</h1>

<div class="news-cards" id="news-container"></div>
<div id="pagination" class="pagination"></div>



<script th:inline="javascript">
    let currentPage = 1;
    const display = 5;
    const team = /*[[${team}]]*/ 'KBO';



    // âœ… í˜ì´ì§€ë„¤ì´ì…˜ UI ìƒì„± í•¨ìˆ˜
    function renderPagination(totalPages) {
        const pagination = document.getElementById('pagination');
        pagination.innerHTML = '';

        for (let i = 1; i <= totalPages; i++) {
            const btn = document.createElement('span');
            btn.classList.add('page-btn');
            if (i === currentPage) btn.classList.add('active');
            btn.innerText = i;
            btn.addEventListener('click', () => {
                currentPage = i;
                loadNews(i);
            });
            pagination.appendChild(btn);
        }
    }

    // âœ… ë‰´ìŠ¤ ë¶ˆëŸ¬ì˜¤ëŠ” í•¨ìˆ˜ (ë‰´ìŠ¤ + í˜ì´ì§€ ë²„íŠ¼ ìƒì„± í¬í•¨)
    function loadNews(page = 1) {
        const container = document.getElementById('news-container');
        if (page === 1) container.innerHTML = '<p>ë¡œë”© ì¤‘...</p>';

        fetch(`/news/${team}?page=${page}&display=${display}`)
            .then(res => res.json())
            .then(newsList => {
                if (newsList.length === 0 && page === 1) {
                    container.innerHTML = '<p>ë‰´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                    return;
                }

                if (page === 1) container.innerHTML = '';

                container.innerHTML = newsList.map(news => `
                    <div class="news-card">
                        <h3><a href="${news.url}" target="_blank">${news.title}</a></h3>
                        <p>${news.summary || ''}</p>
                        <div class="date">${news.pubDate}</div>
                    </div>
                `).join('');

                renderPagination(5); // â† ì—¬ê¸°ì„œ í˜ì´ì§€ ë²ˆí˜¸ ê°±ì‹ 
            }).catch(() => {
            container.innerHTML = '<p>ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ</p>';
        });
    }

    // âœ… ì²˜ìŒ ë¡œë“œ ì‹œ ì‹¤í–‰
    function loadNewsFromThymeleaf() {
        loadNews(1);
    }
</script>


<div class="back-btn">
    <a href="/dugout" class="btn">ğŸ  ë”ê·¸ì•„ì›ƒìœ¼ë¡œ ê°€ê¸°</a>
</div>

<footer>
    Â© 2025 ë”ê·¸ì•„ì›ƒ. â€œë‹¹ì‹ ì˜ ì† ì•ˆì— ìˆëŠ” ì•¼êµ¬ì¥, ì—¬ê¸°ëŠ” ë”ê·¸ì•„ì›ƒì…ë‹ˆë‹¤.â€
</footer>
</body>
</html>


