<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title th:text="${teamName} + ' 타자 기록'">타자 기록</title>

    <link rel="stylesheet" href="/batters/base-batterlist.css"/>
    <link rel="stylesheet" href="/batters/batterList.css"/>
    <!-- 팀별 테마 CSS  -->
    <link rel="stylesheet" href="/teams/team-theme.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet"/>
    <link rel="icon" type="image/png" href="/dugout.png"/>
</head>

<!-- 서버에서 내려준 teamCode를 data-team 속성에 바인딩 -->
<body class="stats-body" th:attr="data-team=${teamCode}">
<!-- 팀 배너 -->
<section class="team-hero">
    <div class="team-hero-content">
        <div class="team-hero-info">
            <h1 th:text="${teamName} + ' 타자 기록'">SSG 타자 기록</h1>
            <p class="slogan team-slogan" th:text="${teamSlogan}">NO LIMITS AMAZING LANDERS</p>
        </div>
        <div class="team-hero-logo" aria-hidden="true"></div>
    </div>
</section>


<!-- 상단: 정렬/검색 -->
<section class="section">
    <form method="get" class="search-form filter-bar">
        <input type="hidden" name="view" th:value="${view}"/>
        <div class="filter-row">
            <div class="filter-item">
                <label>정렬</label>
                <select name="sort" th:value="${sort}">
                    <option value="ops">OPS</option>
                    <option value="avg">AVG</option>
                    <option value="obp">OBP</option>
                    <option value="slg">SLG</option>
                    <option value="hr">HR</option>
                    <option value="rbi">RBI</option>
                    <option value="r">R</option>
                    <option value="h">H</option>
                    <option value="bb">BB</option>
                    <option value="so">SO</option>
                    <option value="ibb">IBB</option>
                    <option value="mh">MH</option>
                    <option value="risp">RISP</option>
                    <option value="nameKr">이름</option>
                </select>
            </div>
            <div class="filter-item">
                <label>순서</label>
                <select name="order" th:value="${order}">
                    <option value="desc">내림차순</option>
                    <option value="asc">오름차순</option>
                </select>
            </div>
            <div class="filter-item grow">
                <label>검색</label>
                <input class="search-input" type="text" name="q" placeholder="선수명" th:value="${q}"/>
            </div>
            <button class="btn search-button">검 색</button>
        </div>
    </form>
</section>

<!-- 뷰 네비 + 테이블 -->
<section class="table-wrap section">
    <div class="view-nav">
        <button class="nav-btn" id="prevView" aria-label="이전 뷰">←</button>
        <div class="dots">
            <span class="dot" data-view="1"></span>
            <span class="dot" data-view="2"></span>
        </div>
        <button class="nav-btn" id="nextView" aria-label="다음 뷰">→</button>
    </div>

    <div class="table-scroll">
        <table id="statsTable">
            <thead>
            <tr>
                <th class="fixed-col">순위</th>
                <th class="fixed-col">선수명</th>

                <!-- 그룹 1 -->
                <th class="group-1 th-tip stat-header" data-stat="AVG" data-sort="avg"><div class="tip-box"></div>AVG</th>
                <th class="group-1 th-tip stat-header" data-stat="G"   data-sort="g"><div class="tip-box"></div>G</th>
                <th class="group-1 th-tip stat-header" data-stat="PA"  data-sort="pa"><div class="tip-box"></div>PA</th>
                <th class="group-1 th-tip stat-header" data-stat="AB"  data-sort="ab"><div class="tip-box"></div>AB</th>
                <th class="group-1 th-tip stat-header" data-stat="R"   data-sort="r"><div class="tip-box"></div>R</th>
                <th class="group-1 th-tip stat-header" data-stat="H"   data-sort="h"><div class="tip-box"></div>H</th>
                <th class="group-1 th-tip stat-header" data-stat="2B"  data-sort="twoB"><div class="tip-box"></div>2B</th>
                <th class="group-1 th-tip stat-header" data-stat="3B"  data-sort="threeB"><div class="tip-box"></div>3B</th>
                <th class="group-1 th-tip stat-header" data-stat="HR"  data-sort="hr"><div class="tip-box"></div>HR</th>
                <th class="group-1 th-tip stat-header" data-stat="TB"  data-sort="tb"><div class="tip-box"></div>TB</th>
                <th class="group-1 th-tip stat-header" data-stat="RBI" data-sort="rbi"><div class="tip-box"></div>RBI</th>
                <th class="group-1 th-tip stat-header" data-stat="SAC" data-sort="sac"><div class="tip-box"></div>SAC</th>
                <th class="group-1 th-tip stat-header" data-stat="SF"  data-sort="sf"><div class="tip-box"></div>SF</th>

                <!-- 그룹 2 -->
                <th class="group-2 th-tip stat-header" data-stat="BB"    data-sort="bb"><div class="tip-box"></div>BB</th>
                <th class="group-2 th-tip stat-header" data-stat="IBB"   data-sort="ibb"><div class="tip-box"></div>IBB</th>
                <th class="group-2 th-tip stat-header" data-stat="HBP"   data-sort="hbp"><div class="tip-box"></div>HBP</th>
                <th class="group-2 th-tip stat-header" data-stat="SO"    data-sort="so"><div class="tip-box"></div>SO</th>
                <th class="group-2 th-tip stat-header" data-stat="GDP"   data-sort="gdp"><div class="tip-box"></div>GDP</th>
                <th class="group-2 th-tip stat-header" data-stat="SLG"   data-sort="slg"><div class="tip-box"></div>SLG</th>
                <th class="group-2 th-tip stat-header" data-stat="OBP"   data-sort="obp"><div class="tip-box"></div>OBP</th>
                <th class="group-2 th-tip stat-header" data-stat="OPS"   data-sort="ops"><div class="tip-box"></div>OPS</th>
                <th class="group-2 th-tip stat-header" data-stat="MH"    data-sort="mh"><div class="tip-box"></div>MH</th>
                <th class="group-2 th-tip stat-header" data-stat="RISP"  data-sort="risp"><div class="tip-box"></div>RISP</th>
                <th class="group-2 th-tip stat-header" data-stat="PH-BA" data-sort="phBa"><div class="tip-box"></div>PH-BA</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="stat, iterStat : ${batters}">
                <!-- 고정 -->
                <td class="fixed-col fixed-col--rank rank-cell" th:text="${iterStat.index + 1}">1</td>
                <td class="fixed-col fixed-col--name" th:text="${stat.player.nameKr}"></td>

                <!-- 그룹 1 -->
                <td class="group-1" data-stat="AVG" th:attr="data-value=${stat.avg}" th:text="${stat.avg}"></td>
                <td class="group-1" data-stat="G" th:attr="data-value=${stat.g}" th:text="${stat.g}"></td>
                <td class="group-1" data-stat="PA" th:attr="data-value=${stat.pa}" th:text="${stat.pa}"></td>
                <td class="group-1" data-stat="AB" th:attr="data-value=${stat.ab}" th:text="${stat.ab}"></td>
                <td class="group-1" data-stat="R" th:attr="data-value=${stat.r}" th:text="${stat.r}"></td>
                <td class="group-1" data-stat="H" th:attr="data-value=${stat.h}" th:text="${stat.h}"></td>
                <td class="group-1" data-stat="2B" th:attr="data-value=${stat.twoB}" th:text="${stat.twoB}"></td>
                <td class="group-1" data-stat="3B" th:attr="data-value=${stat.threeB}" th:text="${stat.threeB}"></td>
                <td class="group-1" data-stat="HR" th:attr="data-value=${stat.hr}" th:text="${stat.hr}"></td>
                <td class="group-1" data-stat="TB" th:attr="data-value=${stat.tb}" th:text="${stat.tb}"></td>
                <td class="group-1" data-stat="RBI" th:attr="data-value=${stat.rbi}" th:text="${stat.rbi}"></td>
                <td class="group-1" data-stat="SAC" th:attr="data-value=${stat.sac}" th:text="${stat.sac}"></td>
                <td class="group-1" data-stat="SF" th:attr="data-value=${stat.sf}" th:text="${stat.sf}"></td>

                <!-- 그룹 2 -->
                <td class="group-2" data-stat="BB" th:attr="data-value=${stat.bb}" th:text="${stat.bb}"></td>
                <td class="group-2" data-stat="IBB" th:attr="data-value=${stat.ibb}" th:text="${stat.ibb}"></td>
                <td class="group-2" data-stat="HBP" th:attr="data-value=${stat.hbp}" th:text="${stat.hbp}"></td>
                <td class="group-2" data-stat="SO" th:attr="data-value=${stat.so}" th:text="${stat.so}"></td>
                <td class="group-2" data-stat="GDP" th:attr="data-value=${stat.gdp}" th:text="${stat.gdp}"></td>
                <td class="group-2" data-stat="SLG" th:attr="data-value=${stat.slg}" th:text="${stat.slg}"></td>
                <td class="group-2" data-stat="OBP" th:attr="data-value=${stat.obp}" th:text="${stat.obp}"></td>
                <td class="group-2" data-stat="OPS" th:attr="data-value=${stat.ops}" th:text="${stat.ops}"></td>
                <td class="group-2" data-stat="MH" th:attr="data-value=${stat.mh}" th:text="${stat.mh}"></td>
                <td class="group-2" data-stat="RISP" th:attr="data-value=${stat.risp}" th:text="${stat.risp}"></td>
                <td class="group-2" data-stat="PH-BA" th:attr="data-value=${stat.phBa}" th:text="${stat.phBa}"></td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="legend">
        <span class="legend-item">컬럼명을 클릭하면 정렬됩니다.</span>
        <!-- 📅 최신 데이터 날짜 표시 -->
        <p class="record-date">
            📅 이 데이터는
            <span th:text="${latestDate}">2025-08-11</span>
            기준입니다.
        </p>
    </div>
</section>

<div class="back-home-section">
    <a href="/dugout" class="btn neon-home-btn">🏠 더그아웃으로 가기</a>
</div>

<footer>
    © 2025 더그아웃. “당신의 손 안에 있는 야구장, 여기는 더그아웃입니다.”
</footer>

<script src="/batters/batter-table.js"></script>
</body>
</html>
